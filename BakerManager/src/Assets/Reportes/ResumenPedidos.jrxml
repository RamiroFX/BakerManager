<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ResumenPedidos" language="groovy" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d4327d7c-2a13-41fb-8d82-cceed980ad9f">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Arial" fontSize="26" isBold="true" pdfFontName="Helvetica-Bold"/>
	<style name="SubTitle" forecolor="#666666" fontName="Arial" fontSize="18"/>
	<style name="Column header" forecolor="#666666" fontName="Arial" fontSize="12" isBold="true"/>
	<style name="Detail" fontName="Arial" fontSize="12"/>
	<parameter name="Fecha inicio" class="java.sql.Timestamp"/>
	<parameter name="Fecha fin" class="java.sql.Timestamp"/>
	<queryString>
		<![CDATA[SELECT
     producto."descripcion" AS Producto,
     sum(pedido_detalle."cantidad") AS Cantidad,
     sum(pedido_detalle."descuento") AS Descuento,
     pedido_detalle."precio" AS Precio,
     cliente."nombre" AS Cliente,
     cliente."entidad" AS Entidad
FROM
     "public"."producto" producto INNER JOIN "public"."pedido_detalle" pedido_detalle ON producto."id_producto" = pedido_detalle."id_producto"
     INNER JOIN "public"."pedido_cabecera" pedido_cabecera ON pedido_detalle."id_pedido_cabecera" = pedido_cabecera."id_pedido_cabecera"
     INNER JOIN "public"."cliente" cliente ON pedido_cabecera."id_cliente" = cliente."id_cliente"
WHERE
     tiempo_recepcion BETWEEN $P{Fecha inicio} AND $P{Fecha fin}
GROUP BY
     Precio,
     Producto,
     Cliente,
     Entidad
ORDER BY
     Cliente]]>
	</queryString>
	<field name="producto" class="java.lang.String"/>
	<field name="cantidad" class="java.math.BigDecimal"/>
	<field name="descuento" class="java.math.BigDecimal"/>
	<field name="precio" class="java.math.BigDecimal"/>
	<field name="cliente" class="java.lang.String"/>
	<field name="entidad" class="java.lang.String"/>
	<group name="cliente_nombre">
		<groupExpression><![CDATA[$F{cliente}]]></groupExpression>
		<groupHeader>
			<band height="40">
				<textField>
					<reportElement uuid="d410f392-4534-469e-a6ff-3a8cc16b0146" style="SubTitle" x="47" y="13" width="506" height="24" forecolor="#333333"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{cliente}]]></textFieldExpression>
				</textField>
				<rectangle>
					<reportElement uuid="c2ded117-bc53-45a3-be09-0de6541721e2" mode="Opaque" x="0" y="13" width="36" height="24" forecolor="#CCCCCC" backcolor="#CCCCCC"/>
				</rectangle>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="6"/>
		</groupFooter>
	</group>
	<group name="cliente_entidad">
		<groupExpression><![CDATA[$F{entidad}]]></groupExpression>
		<groupHeader>
			<band height="30">
				<textField>
					<reportElement uuid="d5059572-6841-402a-b6b5-31eed61c0209" style="SubTitle" x="0" y="4" width="460" height="20"/>
					<textElement>
						<font size="16" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{entidad}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="101" splitType="Stretch">
			<staticText>
				<reportElement uuid="7755bbc1-ddfe-4ac9-8d6c-cfd2effb472e" style="Title" x="0" y="5" width="301" height="33" forecolor="#000000"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[PanaderÃ­a Le Croissant]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="511181bd-863c-45ff-aecc-df304dd1fb6d" style="SubTitle" x="302" y="16" width="158" height="22" forecolor="#000000"/>
				<textElement textAlignment="Right"/>
				<text><![CDATA[Reporte de pedidos]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="3174e401-e9db-4919-99bc-ed6cb907a81e" style="SubTitle" x="0" y="53" width="98" height="22" forecolor="#000000"/>
				<textElement textAlignment="Right"/>
				<text><![CDATA[Fecha inicio]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="dfd916d2-751d-4e5a-834d-52af0f8b82e1" style="SubTitle" x="2" y="79" width="98" height="22" forecolor="#000000"/>
				<textElement textAlignment="Left"/>
				<text><![CDATA[Fecha fin]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="EEEEE dd MMMMM yyyy" isBlankWhenNull="true">
				<reportElement uuid="8108df7c-81d3-4844-83a4-bef1159edb5a" x="102" y="56" width="200" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{Fecha inicio}.toString()]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="EEEEE dd MMMMM yyyy" isBlankWhenNull="true">
				<reportElement uuid="b39eab2d-b3ea-4970-8918-120fd41a7678" x="102" y="81" width="200" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{Fecha fin}.toString()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="36" splitType="Stretch">
			<line>
				<reportElement uuid="ff94426b-9a29-46a3-826c-e72cb4f09ba0" positionType="FixRelativeToBottom" x="0" y="35" width="555" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement uuid="a6b5ffe4-8672-4c67-8606-c9f78fc144bb" style="Column header" x="0" y="19" width="92" height="15"/>
				<textElement/>
				<text><![CDATA[Producto]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="53626898-4809-4c22-b72b-5dc4ad8fac98" style="Column header" x="180" y="21" width="92" height="15"/>
				<textElement/>
				<text><![CDATA[Cantidad]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="ca8b0ff8-63e1-4e06-afa5-846aca5144e9" style="Column header" x="272" y="19" width="92" height="15"/>
				<textElement/>
				<text><![CDATA[Descuento]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="2a27e55c-af5b-4e21-996c-11f93c6593e6" style="Column header" x="387" y="21" width="92" height="15"/>
				<textElement/>
				<text><![CDATA[Precio]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<line>
				<reportElement uuid="e13c0a65-895d-4ddc-9230-1554225e2f87" positionType="FixRelativeToBottom" x="0" y="15" width="555" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement uuid="3685b816-fc31-4cae-a5a1-19d1809fba23" style="Detail" x="0" y="0" width="180" height="15"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{producto}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="4c092cc4-5720-488b-8f6b-5014805e1bf9" style="Detail" x="180" y="0" width="92" height="15"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="eb866ab1-5ce3-422a-b0fa-770822f1596d" style="Detail" x="270" y="0" width="92" height="15"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{descuento}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="63360796-caf6-4ad5-83a9-fb9e9dd344cf" style="Detail" x="387" y="0" width="92" height="15"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{precio}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch">
			<line>
				<reportElement uuid="5657abba-7f60-4c4b-bde3-5f4849595d6e" positionType="FixRelativeToBottom" x="0" y="3" width="555" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
		</band>
	</columnFooter>
	<pageFooter>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement uuid="84a07e0b-1ae4-4bab-a5fa-c369854a64fa" style="Column header" x="433" y="0" width="80" height="20"/>
				<textElement textAlignment="Right">
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement uuid="b1d99e54-fa60-441f-8f0e-634fc8943777" style="Column header" x="513" y="0" width="40" height="20"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement uuid="55b17a22-68a4-4881-a526-0e9727a886d9" style="Column header" x="0" y="0" width="197" height="20"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
